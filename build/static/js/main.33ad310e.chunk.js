(this["webpackJsonptunein-exercise-ui"]=this["webpackJsonptunein-exercise-ui"]||[]).push([[0],{28:function(e){e.exports=JSON.parse('{"stationsUrl":"https://s3-us-west-1.amazonaws.com/cdn-web.tunein.com/stations.json"}')},32:function(e,t,n){e.exports=n(45)},41:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"loadStations",(function(){return b}));var r=n(0),c=n.n(r),l=n(16),i=n.n(l),o=n(10),s=(n(41),n(2)),u=n(7),m=n(22),f=n.n(m),d=n(27),E=n(28);function p(){return(e=E.stationsUrl,fetch(e).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)}))).then((function(e){return e.data}));var e}var g,b=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_STATIONS_REQUEST"}),e.prev=1,e.next=4,p();case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t({type:"GET_STATIONS_FAILURE",payload:{message:"Error loading stations list"}}),e.abrupt("return");case 11:t({type:"GET_STATIONS_SUCCESS",payload:{stations:n}});case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t){return t?e.stations.all.filter((function(e){return e.tags.find((function(e){return e.id===t}))})):e.stations.all},h=function(e){return e.stations.tags},S=function(e){var t=e.tags,n=e.selectedTagId;return c.a.createElement("ul",{className:"list-inline"},t.map((function(e){return c.a.createElement("li",{key:e.path,className:"list-inline-item"},e.id===n?c.a.createElement("b",null,e.name):c.a.createElement(u.b,{to:"/".concat(e.path)},e.name))})))},y=function(e){var t=e.stations;return c.a.createElement("ul",{className:"list-unstyled d-flex flex-row flex-wrap"},t.map((function(e){return c.a.createElement("li",{key:e.id,className:"text-center m-3"},c.a.createElement(u.b,{to:"/".concat(e.path)},c.a.createElement("div",null,c.a.createElement("img",{src:e.imgUrl,width:"145",height:"145",alt:""})),e.name))})))},O=Object(o.b)((function(e,t){return{stations:v(e,t.filterByTagId),tags:h(e)}}))((function(e){var t=e.filterByTagId,n=e.tags,a=e.stations;return c.a.createElement("div",{className:"container py-3"},c.a.createElement(S,{tags:n,selectedTagId:t}),c.a.createElement(y,{stations:a}))})),T=n(11),j=function(e){var t=e.url,n=Object(r.useState)(document.createElement("audio")),a=Object(T.a)(n,1)[0],l=Object(r.useState)(!1),i=Object(T.a)(l,2),o=i[0],s=i[1],u=function(){a.pause(),a.src="",s(!1)},m=function(){a.src=t,a.play(),s(!0)};return Object(r.useEffect)((function(){return o&&m(),function(){return u()}}),[t]),c.a.createElement("div",{className:"d-inline-block p-2 border"},o?c.a.createElement("button",{type:"button",className:"btn",onClick:u},"Stop"):c.a.createElement("button",{type:"button",className:"btn",onClick:m},"Play"))},N=function(e){var t=e.stationId,n=Object(o.c)((function(e){return function(e,t){return e.stations.all.find((function(e){return e.id===t}))}(e,t)}));return n?c.a.createElement("div",{className:"container d-flex py-5"},c.a.createElement("div",null,c.a.createElement("img",{src:n.imgUrl,width:"145",height:"145",className:"mb-2",alt:""}),c.a.createElement("div",{className:"text-center"},c.a.createElement(j,{url:n.streamUrl}))),c.a.createElement("div",{className:"pl-3"},c.a.createElement("h2",null,n.name),c.a.createElement(S,{tags:n.tags}),c.a.createElement("p",null,n.description))):c.a.createElement(s.a,{to:"/"})},x=function(){return c.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center"},c.a.createElement("div",{className:"spinner-border text-primary pl-1",role:"status"},"Loading..."))},I=(g=["GET_STATIONS"],function(e){return g.some((function(t){return e.loading[t]}))}),w=function(e){return function(t){return e.map((function(e){return t.error[e]})).filter((function(e){return e}))[0]||""}}(["GET_STATIONS"]),U={loadStations:a.loadStations},A=Object(o.b)((function(e){return{isLoading:I(e),errorMessage:w(e),stations:v(e),tags:h(e)}}),U)((function(e){var t=e.isLoading,n=e.errorMessage,a=e.stations,l=e.tags,i=e.loadStations;Object(r.useEffect)((function(){i()}),[i]);var o=Object(s.e)().pathname.substr(1),m=""===o,f=!1,d=!1;return m||(f=a.find((function(e){return e.path===o})))||(d=l.find((function(e){return e.path===o}))),m||f||d?c.a.createElement("div",{className:"App d-flex flex-column h-100"},c.a.createElement("header",null,c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,m?"TuneIn Stations":c.a.createElement(u.b,{to:"/"}," TuneIn Stations")))),c.a.createElement("div",{className:"d-flex flex-grow-1 flex-column h-100"},t&&c.a.createElement(x,null),n&&c.a.createElement("div",{className:"alert alert-danger"},n),m&&c.a.createElement(O,null),d&&c.a.createElement(O,{filterByTagId:d.id}),f&&c.a.createElement(N,{stationId:f.id})),c.a.createElement("footer",null,c.a.createElement("div",{className:"container text-center"},"\xa9 2020 *****"))):c.a.createElement(s.a,{to:"/"})})),_=n(9),k=n(29),C=n(30),R=(n(44),n(13)),L=n(8),G=n(31),B={all:[],tags:[]},F=function(e){return e.toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-")},M=Object(_.combineReducers)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=/(.*)_(REQUEST|SUCCESS|FAILURE)/.exec(n);if(!a)return e;var r=Object(T.a)(a,3),c=r[1],l=r[2];return Object(L.a)(Object(L.a)({},e),{},Object(R.a)({},c,"REQUEST"===l))},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=/(.*)_(REQUEST|FAILURE)/.exec(n);if(!r)return e;var c=Object(T.a)(r,3),l=c[1],i=c[2];return Object(L.a)(Object(L.a)({},e),{},Object(R.a)({},l,"FAILURE"===i?a.message:""))},stations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.payload||{};switch(t.type){case"GET_STATIONS_SUCCESS":var a=n.stations,r=Array.from(new Set(a.reduce((function(e,t){var n;return(null===(n=t.tags)||void 0===n?void 0:n.length)&&e.push.apply(e,Object(G.a)(t.tags)),e}),[]))).map((function(e){return{id:e,path:F(e),name:e}}));return a.forEach((function(e){e.path=F("".concat(e.name," ").concat(e.id)),e.tags=e.tags.map((function(e){return r.find((function(t){return t.name===e}))}))})),Object(L.a)(Object(L.a)({},e),{},{all:a.sort((function(e,t){return t.popularity-e.popularity})),tags:r})}return e}}),Q=[C.a];var J=Object(_.createStore)(M,{},Object(k.composeWithDevTools)(_.applyMiddleware.apply(void 0,Q)));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:J},c.a.createElement(u.a,null,c.a.createElement(A,null)))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.33ad310e.chunk.js.map